import{usePageData as U,useSiteData as N,defineClientConfig as x}from"@vuepress/client";import{defineComponent as G,computed as k,h as a,resolveComponent as w}from"vue";import{useLocaleConfig as M,startsWith as C,keys as y,endsWith as m,hasGlobalComponent as I}from"vuepress-shared/client";import{useRouter as R,RouterLink as _}from"vue-router";import"./styles/auto-catalog.scss";var D=G({name:"AutoCatalog",props:{base:{type:String,default:""},level:{type:Number,default:3},index:Boolean},setup(c,{slots:h}){const f=M(AUTO_CATALOG_LOCALES),O=U(),g=R(),T=N(),v=i=>{const u=i[AUTO_CATALOG_INDEX_META_KEY];return typeof u>"u"||u},E=()=>{const i=c.base||O.value.path.replace(/\/[^/]+$/,"/"),u=g.getRoutes(),p=[];return u.filter(({meta:l,path:e})=>{if(!C(e,i)||e===i)return!1;if(i==="/"){const t=y(T.value.locales).filter(n=>n!=="/");if(e==="/404.html"||t.some(n=>C(e,n)))return!1}return(m(e,".html")&&!m(e,"/index.html")||m(e,"/"))&&v(l)}).map(({path:l,meta:e})=>{const t=l.substring(i.length).split("/").length;return{title:e[AUTO_CATALOG_TITLE_META_KEY]||"",icon:e[AUTO_CATALOG_ICON_META_KEY],base:l.replace(/\/[^/]+\/?$/,"/"),order:e[AUTO_CATALOG_ORDER_META_KEY]||null,level:m(l,"/")?t-1:t,path:l}}).filter(({title:l,level:e})=>typeof l=="string"&&l&&e<=c.level).sort(({title:l,level:e,path:t,order:n},{title:r,level:o,path:d,order:s})=>e-o||(m(t,"/index.html")?-1:m(d,"/index.html")?1:n===null?s===null?l.localeCompare(r):s:s===null?n:n>0?s>0?n-s:-1:s<0?n-s:1)).forEach(l=>{var e;const{base:t,level:n}=l;switch(n){case 1:p.push(l);break;case 2:{const r=p.find(o=>o.path===t);r&&(r.children??(r.children=[])).push(l);break}default:{const r=p.find(o=>o.path===t.replace(/\/[^/]+\/$/,"/"));if(r){const o=(e=r.children)==null?void 0:e.find(d=>d.path===t);o&&(o.children??(o.children=[])).push(l)}}}}),p},b=k(()=>E());return()=>a("div",{class:"auto-catalog-wrapper"},[a("h2",{class:"main-title"},f.value.title),...b.value.map(({children:i=[],icon:u,path:p,title:l},e)=>[a("h3",{id:l,class:["child-title",{"has-children":i.length}]},[a("a",{href:`#${l}`,class:"header-anchor"},"#"),a(_,{class:"catalog-title",to:p},()=>[c.index?`${e+1}.`:null,u&&h.icon?h.icon({icon:u}):null,l||"Unknown"])]),i.length?a("ul",{class:"child-catalog-wrapper"},i.map(({children:t=[],icon:n,path:r,title:o},d)=>a("li",{class:"child-catalog-item"},[a("div",{class:["sub-title",{"has-children":t.length}]},[a("a",{href:`#${o}`,class:"header-anchor"},"#"),a(_,{class:"catalog-title",to:r},()=>[c.index?`${e+1}.${d+1}`:null,n&&h.icon?h.icon({icon:n}):null,o||"Unknown"])]),t.length?a("div",{class:"sub-catalog-wrapper"},t.map(({icon:s,path:A,title:L},$)=>a(_,{class:"sub-catalog-item",to:A},()=>[c.index?`${e+1}.${d+1}.${$+1}`:null,s&&h.icon?h.icon({icon:s}):null,L||"Unknown"]))):null]))):null])])}}),K=x({enhance:({app:c})=>{I("AutoCatalog",c)||c.component("AutoCatalog",h=>a(D,h,AUTO_CATALOG_ICON_COMPONENT?{icon:({icon:f})=>a(w(AUTO_CATALOG_ICON_COMPONENT),{icon:f})}:{}))}});export{K as default};
//# sourceMappingURL=config.js.map
