import{useSassPalettePlugin as E}from"vuepress-plugin-sass-palette";import{Logger as h,getTitleFromFilename as L,checkVersion as K,getLocales as v}from"vuepress-shared/node";import{createPage as M}from"@vuepress/core";import{ensureEndingSlash as $}from"@vuepress/shared";import{getDirname as G,path as y}from"@vuepress/utils";const I=G(import.meta.url),d="vuepress-plugin-auto-catalog",T=new h(d),x=$(y.resolve(I,"../client")),N=async(l,{component:a="AutoCatalog",exclude:g=[],frontmatter:A=()=>({}),iconComponent:r,level:c=3,index:u=!1})=>{const{env:{isDebug:s},pages:p}=l,i=new Set,m=`<${a}${[1,2].includes(c)?` :level="${c}"`:""}${u?" index":""}>${r?`
  <template #icon="{icon}"><${r} :icon="icon" /></template>
`:""}</${a}>
`;p.forEach(({path:t,pathLocale:n})=>{let e=t;for(;e!==n;)e=e.replace(/\/(?:[^/]+\/?)$/,"/"),!i.has(e)&&g.every(o=>!e.match(o))&&p.every(({path:o})=>o!==e)&&(s&&T.info(`Generating catalog ${e}}`),i.add(e))}),await Promise.all(Array.from(i).map(t=>decodeURI(t)).map(t=>{const[,n]=/\/([^/]+)\/?$/.exec(t)||[],e=L(n);return M(l,{frontmatter:{title:e,...A(t)||{}},content:m,path:t})})).then(t=>{l.pages.push(...t)})},P={"/en/":{title:"Catalog"},"/zh/":{title:"目录"},"/zh-tw/":{title:"目錄"},"/de/":{title:"Katalog"},"/de-at/":{title:"Katalog"},"/vi/":{title:"Danh mục"},"/uk/":{title:"Каталог"},"/ru/":{title:"Каталог"},"/br/":{title:"Catálogo"},"/pl/":{title:"Katalog"},"/sk/":{title:"Katalóg"},"/fr/":{title:"Catalogue"},"/es/":{title:"Catálogo"},"/ja/":{title:"カタログ"},"/tr/":{title:"Katalog"},"/ko/":{title:"목차"},"/fi/":{title:"Luettelo"},"/hu/":{title:"Katalógus"},"/id/":{title:"Katalog"},"/nl/":{title:"Catalogus"}},R=(l={})=>a=>{K(a,d,"2.0.0-beta.61"),a.env.isDebug&&T.info("Options:",l),E(a,{id:"hope"});const{component:g,iconComponent:A,iconGetter:r,iconRouteMetaKey:c="i",shouldIndex:u,indexRouteMetaKey:s="I",locales:p,orderGetter:i,orderRouteMetaKey:m="O",titleGetter:t=e=>e.title,titleRouteMetaKey:n="title"}=l;return{name:d,define:()=>({AUTO_CATALOG_LOCALES:v({app:a,name:d,default:P,config:p}),AUTO_CATALOG_ICON_COMPONENT:A||"",AUTO_CATALOG_TITLE_META_KEY:n,AUTO_CATALOG_ICON_META_KEY:c,AUTO_CATALOG_ORDER_META_KEY:m,AUTO_CATALOG_INDEX_META_KEY:s}),extendsPage:e=>{if(!g){const o={},f=t==null?void 0:t(e),_=r==null?void 0:r(e),C=(u==null?void 0:u(e))??null,O=(i==null?void 0:i(e))??null;f&&(o[n]=f),_&&(o[c]=_),typeof C=="boolean"&&(o[s]=C?1:0),typeof O=="number"&&(o[m]=O),e.routeMeta={...e.routeMeta,...o}}},onInitialized:e=>N(e,l),...g?{}:{clientConfigFile:`${x}config.js`}}};export{R as autoCatalogPlugin};
//# sourceMappingURL=index.js.map
