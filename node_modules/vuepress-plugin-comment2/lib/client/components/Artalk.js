import{usePageFrontmatter as p,usePageData as k,useSiteData as v}from"@vuepress/client";import{defineComponent as f,ref as h,computed as M,onMounted as w,watch as d,h as m,nextTick as P}from"vue";import"artalk/dist/Artalk.css";import"../styles/artalk.scss";const a=COMMENT_OPTIONS,T=!!a.server;var g=f({name:"Artalk",props:{darkmode:Boolean},setup:r=>{const s=p(),l=k(),i=v(),u=h();let t=null;const n=M(()=>{if(!T)return!1;const e=a.comment!==!1,o=s.value.comment;return!!o||e!==!1&&o!==!1}),c=async()=>{n.value&&await Promise.all([import("artalk"),new Promise(e=>{setTimeout(()=>{P().then(e)},a.delay)})]).then(([{default:e}])=>{const o=e;try{t=new o({useBackendConf:!1,site:i.value.title,pageTitle:l.value.title,...a,el:u.value,pageKey:l.value.path,darkMode:r.darkmode}),a.useBackendConf&&t.on("conf-loaded",()=>{t.setDarkMode(r.darkmode)})}catch{}})};return w(()=>{d(()=>[n.value,l.value.path],()=>c(),{immediate:!0}),d(()=>r.darkmode,e=>{t==null||t.setDarkMode(e)})}),()=>n.value?m("div",{class:"artalk-wrapper"},m("div",{ref:u})):null}});export{g as default};
//# sourceMappingURL=Artalk.js.map
