import{usePageData as g,usePageFrontmatter as f,usePageLang as C,withBase as h}from"@vuepress/client";import{pageviewCount as L}from"@waline/client/dist/pageview.mjs";import{pageviewCount as S}from"@waline/client/dist/pageview.mjs";import{defineComponent as w,computed as a,onMounted as N,watch as A,nextTick as E,h as m,defineAsyncComponent as T}from"vue";import{useLocaleConfig as W,LoadingIcon as y}from"vuepress-shared/client";import"@waline/client/dist/waline.css";import"../styles/waline.scss";const e=COMMENT_OPTIONS,I=WALINE_LOCALES,i=!!e.serverURL;WALINE_META&&import("@waline/client/dist/waline-meta.css");var M=w({name:"WalineComment",setup(){const u=g(),l=f(),p=C(),s=W(I);let n;const v=a(()=>{if(!i)return!1;const r=e.comment!==!1,t=l.value.comment;return!!t||r!==!1&&t!==!1}),c=a(()=>{if(!i)return!1;const r=e.pageview!==!1,t=l.value.pageview;return!!t||r!==!1&&t!==!1}),o=a(()=>h(u.value.path)),d=a(()=>({lang:p.value==="zh-CN"?"zh-CN":"en",locale:s.value,dark:"html.dark",...e,path:o.value}));return N(()=>{A(o,()=>{n==null||n(),c.value&&E().then(()=>{setTimeout(()=>{n=L({serverURL:e.serverURL,path:o.value})},e.delay||800)})},{immediate:!0})}),()=>v.value?m("div",{class:"waline-wrapper",id:"comment"},i?m(T({loader:async()=>(await import("@waline/client/dist/component.mjs")).Waline,loadingComponent:y}),d.value):[]):null}});export{M as default,S as pageviewCount};
//# sourceMappingURL=Waline.js.map
