import{defineComponent as y,ref as g,computed as s,onMounted as v,h as e,TransitionGroup as k}from"vue";import{useRoute as l,useRouter as S}from"vue-router";import{startsWith as p,isAbsoluteUrl as w}from"vuepress-shared/client";import{isLinkHttp as C}from"@vuepress/shared";import{C as x}from"../icons-efab7685.js";import"../styles/notice.scss";var H=y({name:"NoticeItem",props:{path:{type:String,default:""},match:{type:String,default:""},title:{type:String,required:!0},content:{type:String,required:!0},actions:{type:Array,default:()=>[]},noticeKey:{type:String,default:""},showOnce:Boolean,confirm:Boolean,fullscreen:Boolean},setup(t){const i=l(),r=S(),n=g(!1),u=s(()=>t.noticeKey?`notice-${t.noticeKey}`:`${t.title}${t.content}`),m=s(()=>t.match?new RegExp(t.match).test(i.path):p(i.path,t.path));v(()=>{const o=(t.showOnce?localStorage:sessionStorage).getItem(u.value);n.value=!o});const a=()=>{n.value=!1,(t.showOnce?localStorage:sessionStorage).setItem("v2-notice","true")},f=o=>{o&&(w(o)?r.push(o):C(o)&&window.open(o)),a()};return()=>e(k,{name:"notice-fade"},()=>m.value&&n.value?[t.fullscreen?e("div",{key:"mask",class:"notice-mask",onClick:()=>{t.confirm||a()}}):null,e("div",{key:"popup",class:["notice-wrapper",{fullscreen:t.fullscreen}]},[e("header",{class:"notice-title"},[t.confirm?null:e(x,{onClick:()=>a()}),e("span",{innerHTML:t.title})]),e("div",{class:"notice-content",innerHTML:t.content}),e("div",{class:"notice-footer"},t.actions.map(({text:o,link:d,type:h=""})=>e("button",{class:["notice-footer-action",h],onClick:()=>f(d),innerHTML:o})))])]:[])}});const c=({config:t})=>{const i=l(),r=t.find(n=>"match"in n?new RegExp(n.match).test(i.path):p(i.path,n.path));return r?e(H,r):null};c.displayName="Notice",c.props={config:{type:Array,required:!0}};export{c as default};
//# sourceMappingURL=Notice.js.map
