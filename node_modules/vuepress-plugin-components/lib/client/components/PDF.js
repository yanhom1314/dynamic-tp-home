import{isDef as h,isString as w,ensureEndingSlash as v,entries as b,useLocaleConfig as S}from"@vuepress/helper/client";import{defineComponent as y,onMounted as P,h as L}from"vue";import"../styles/pdf.scss";import{withBase as C}from"vuepress/client";import{checkIsiPad as D,checkIsMobile as F,checkIsSafari as T}from"vuepress-shared/client";import{u as $}from"../size-DYAeJ0VE.js";import{g as I}from"../getLink-DBmDl_2w.js";import"@vueuse/core";const p=e=>{console.error(`[PDF]: ${e}`)},N=e=>{for(;e.firstChild;)e.removeChild(e.firstChild)},E=e=>e==="string"?document.querySelector(e):e instanceof HTMLElement?e:document.body,M=e=>{let t="";return e&&(t+=b(e).map(([r,n])=>r==="noToolbar"?`toolbar=${n?0:1}`:`${encodeURIComponent(r)}=${encodeURIComponent(n)}`).join("&"),t&&(t=`#${t.slice(0,t.length-1)}`)),t},u=(e,t,r,n,l)=>{N(t);const a=`${e==="pdfjs"?`${v(C(PDFJS_URL))}web/viewer.html?file=${encodeURIComponent(r)}`:r}${M(n)}`,o=e==="pdfjs"||e==="iframe"?"iframe":"embed",i=document.createElement(o);return i.className="pdf-viewer",i.type="application/pdf",i.title=l,i.src=a,i instanceof HTMLIFrameElement&&(i.allow="fullscreen"),t.classList.add("pdf-viewer-container"),t.appendChild(i),t.getElementsByTagName(o)[0]},R=(e,t,{title:r,hint:n,options:l={}})=>{if(typeof window>"u"||!window?.navigator?.userAgent)return null;const{navigator:a}=window,{userAgent:o}=a,i=h(window.Promise),s=D(o)||F(o),f=!s&&T(o),c=!s&&/firefox/iu.test(o)&&o.split("rv:").length>1?parseInt(o.split("rv:")[1].split(".")[0],10)>18:!1,g=!s&&(i||c);if(!w(e))return p("URL is not valid"),null;const d=E(t);if(!d)return p("Target element cannot be determined"),null;const m=r||/\/([^/]+).pdf/.exec(e)?.[1]||"PDF Viewer";return g||!s?u(f?"iframe":"embed",d,e,l,m):PDFJS_URL?u("pdfjs",d,e,l,m):(d.innerHTML=n.replace(/\[url\]/g,e),p("This browser does not support embedded PDFs"),null)};var U=y({name:"PDF",props:{url:{type:String,required:!0},title:{type:String,default:""},width:{type:[String,Number],default:"100%"},height:{type:[String,Number],default:void 0},ratio:{type:[String,Number],default:16/9},page:{type:[String,Number],default:1},noToolbar:Boolean,zoom:{type:[String,Number],default:100}},setup(e){const{el:t,width:r,height:n,resize:l}=$(e),a=S(PDF_LOCALES);return P(()=>{R(I(e.url),t.value,{title:e.title,hint:a.value.hint,options:{page:e.page,noToolbar:e.noToolbar,zoom:e.zoom}}),l()}),()=>L("div",{class:"pdf-viewer-wrapper",ref:t,style:{width:r.value,height:n.value}})}});export{U as default};
//# sourceMappingURL=PDF.js.map
