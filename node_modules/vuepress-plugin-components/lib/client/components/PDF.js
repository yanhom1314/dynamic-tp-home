import{defineComponent as v,onMounted as b,h as S}from"vue";import{checkIsiPad as y,checkIsMobile as L,checkIsSafari as P,entries as C,useLocaleConfig as F}from"vuepress-shared/client";import"../styles/pdf.scss";import{withBase as T}from"@vuepress/client";import{isString as D,ensureEndingSlash as I}from"@vuepress/shared";import{u as $}from"../size-daba93c1.js";import{g as N}from"../getLink-dfca07b4.js";import"@vueuse/core";const u=e=>{console.error("[PDF]: "+e)},R=e=>{for(;e.firstChild;)e.removeChild(e.firstChild)},E=e=>e==="string"?document.querySelector(e):e instanceof HTMLElement?e:document.body,M=e=>{let t="";return e&&(t+=C(e).map(([o,n])=>o==="noToolbar"?`toolbar=${n?0:1}`:`${encodeURIComponent(o)}=${encodeURIComponent(n)}`).join("&"),t&&(t=`#${t.slice(0,t.length-1)}`)),t},f=(e,t,o,n,r)=>{R(t);let a=o;e==="pdfjs"&&(a=`${`${I(T(PDFJS_URL))}web/viewer.html`}?file=${encodeURIComponent(o)}${M(n)}`);const d=e==="pdfjs"||e==="iframe"?"iframe":"embed",i=document.createElement(d);return i.className="pdf-viewer",i.type="application/pdf",i.title=r,i.src=a,i instanceof HTMLIFrameElement&&(i.allow="fullscreen"),t.classList.add("pdf-viewer-container"),t.appendChild(i),t.getElementsByTagName(d)[0]},U=(e,t=null,{title:o,hint:n,options:r={}})=>{var a,d;if(typeof window>"u"||!((a=window==null?void 0:window.navigator)!=null&&a.userAgent))return null;const{navigator:i}=window,{userAgent:l}=i,c=window.Promise!==void 0,s=y(l)||L(l),g=!s&&P(l),h=!s&&/firefox/i.test(l)&&l.split("rv:").length>1?parseInt(l.split("rv:")[1].split(".")[0],10)>18:!1,w=!s&&(c||h);if(!D(e))return u("URL is not valid"),null;const p=E(t);if(!p)return u("Target element cannot be determined"),null;const m=o||((d=/\/([^/]+).pdf/.exec(e))==null?void 0:d[1])||"PDF Viewer";return w||!s?f(g?"iframe":"embed",p,e,r,m):PDFJS_URL?f("pdfjs",p,e,r,m):(p.innerHTML=n.replace(/\[url\]/g,e),u("This browser does not support embedded PDFs"),null)};var j=v({name:"PDF",props:{url:{type:String,required:!0},title:{type:String,default:""},width:{type:[String,Number],default:"100%"},height:{type:[String,Number],default:void 0},ratio:{type:[String,Number],default:16/9},page:{type:[String,Number],default:1},noToolbar:Boolean,zoom:{type:[String,Number],default:100}},setup(e){const{el:t,width:o,height:n}=$(e),r=F(PDF_LOCALES);return b(()=>{U(N(e.url),t.value,{title:e.title,hint:r.value.hint,options:{page:e.page,noToolbar:e.noToolbar,zoom:e.zoom}})}),()=>S("div",{class:"pdf-preview",ref:t,style:{width:o.value,height:n.value}})}});export{j as default};
//# sourceMappingURL=PDF.js.map
