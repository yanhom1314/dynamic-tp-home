{"version":3,"file":"FlowChart.js","sources":["../../../src/client/flowchart-preset/base.ts","../../../src/client/flowchart-preset/ant.ts","../../../src/client/flowchart-preset/pie.ts","../../../src/client/flowchart-preset/vue.ts","../../../src/client/flowchart-preset/index.ts","../../../src/client/components/FlowChart.ts"],"sourcesContent":["export default {\n  // eslint-disable-next-line id-length\n  x: 0,\n  // eslint-disable-next-line id-length\n  y: 0,\n  \"line-width\": 2,\n  \"line-length\": 40,\n  \"text-margin\": 8,\n  \"font-size\": 14,\n  \"font-color\": \"#8DA1AC\",\n  \"line-color\": \"#8DA1AC\",\n  \"element-color\": \"black\",\n  fill: \"white\",\n  \"yes-text\": \"Yes\",\n  \"no-text\": \"No\",\n  \"arrow-end\": \"block\",\n  scale: 1,\n};\n","import base from \"./base.js\";\n\nexport default {\n  ...base,\n\n  // style symbol types\n  symbols: {\n    start: {\n      class: \"start-element\",\n      \"font-color\": \"#fff\",\n      fill: \"#595959\",\n      \"line-width\": \"0px\",\n    },\n    end: {\n      class: \"end-element\",\n      \"font-color\": \"#fff\",\n      fill: \"#595959\",\n      \"line-width\": \"0px\",\n    },\n    operation: {\n      class: \"operation-element\",\n      \"font-color\": \"#fff\",\n      fill: \"#1890ff\",\n      \"line-width\": \"0px\",\n    },\n    inputoutput: {\n      class: \"inputoutput-element\",\n      \"font-color\": \"#fff\",\n      fill: \"#1890ff\",\n      \"line-width\": \"0px\",\n    },\n    subroutine: {\n      class: \"subroutine-element\",\n      \"font-color\": \"#fff\",\n      fill: \"#FF485E\",\n      \"element-color\": \"#fff\",\n      \"line-color\": \"red\",\n    },\n    condition: {\n      class: \"condition-element\",\n      \"font-color\": \"#fff\",\n      fill: \"#FF485E\",\n      \"line-width\": \"0px\",\n    },\n    parallel: {\n      class: \"parallel-element\",\n      \"font-color\": \"#fff\",\n      fill: \"#1890ff\",\n      \"line-width\": \"0px\",\n    },\n  },\n};\n","import base from \"./base.js\";\n\nexport default {\n  ...base,\n\n  // style symbol types\n  \"line-width\": 1,\n  symbols: {\n    start: {\n      class: \"start-element\",\n      fill: \"#ccc\",\n      \"line-width\": \"1px\",\n      \"line-color\": \"#5c6ac4\",\n      \"font-color\": \"#000\",\n    },\n    end: {\n      class: \"end-element\",\n      fill: \"#ccc\",\n      \"line-width\": \"1px\",\n      \"line-color\": \"#5c6ac4\",\n      \"font-color\": \"#000\",\n    },\n    operation: {\n      class: \"operation-element\",\n      fill: \"#f1f1f1\",\n      \"line-width\": \"1px\",\n      \"line-color\": \"#5c6ac4\",\n      \"font-color\": \"#000\",\n    },\n    inputoutput: {\n      class: \"inputoutput-element\",\n      fill: \"#f1f1f1\",\n      \"line-width\": \"1px\",\n      \"line-color\": \"#5c6ac4\",\n      \"font-color\": \"#000\",\n    },\n    subroutine: {\n      class: \"subroutine-element\",\n      fill: \"#f1f1f1\",\n      \"line-width\": \"1px\",\n      \"line-color\": \"#5c6ac4\",\n      \"font-color\": \"#000\",\n    },\n    condition: {\n      class: \"condition-element\",\n      fill: \"#f1f1f1\",\n      \"line-width\": \"1px\",\n      \"line-color\": \"#5c6ac4\",\n      \"font-color\": \"#000\",\n    },\n    parallel: {\n      class: \"parallel-element\",\n      fill: \"#f1f1f1\",\n      \"line-width\": \"1px\",\n      \"line-color\": \"#5c6ac4\",\n      \"font-color\": \"#000\",\n    },\n  },\n};\n","import base from \"./base.js\";\n\nexport default {\n  ...base,\n\n  // style symbol types\n  symbols: {\n    start: {\n      class: \"start-element\",\n      \"font-color\": \"#fff\",\n      fill: \"#2F495F\",\n      \"line-width\": \"0px\",\n    },\n    end: {\n      class: \"end-element\",\n      \"font-color\": \"#fff\",\n      fill: \"#2F495F\",\n      \"line-width\": \"0px\",\n    },\n    operation: {\n      class: \"operation-element\",\n      \"font-color\": \"#fff\",\n      fill: \"#00BC7D\",\n      \"line-width\": \"0px\",\n    },\n    inputoutput: {\n      class: \"inputoutput-element\",\n      \"font-color\": \"#fff\",\n      fill: \"#EB4D5D\",\n      \"line-width\": \"0px\",\n    },\n    subroutine: {\n      class: \"subroutine-element\",\n      \"font-color\": \"#fff\",\n      fill: \"#937AC4\",\n      \"element-color\": \"#fff\",\n      \"line-color\": \"red\",\n    },\n    condition: {\n      class: \"condition-element\",\n      \"font-color\": \"#fff\",\n      fill: \"#FFB500\",\n      \"line-width\": \"0px\",\n    },\n    parallel: {\n      class: \"parallel-element\",\n      \"font-color\": \"#fff\",\n      fill: \"#2F495F\",\n      \"line-width\": \"0px\",\n    },\n  },\n};\n","/**\n * Forked from https://github.com/ulivz/vuepress-plugin-flowchart/tree/master/lib/presets\n *\n * MIT LICENSED\n */\n\nimport ant from \"./ant.js\";\nimport pie from \"./pie.js\";\nimport vue from \"./vue.js\";\n\nexport default {\n  ant,\n  vue,\n  pie,\n};\n","import { useDebounceFn, useEventListener } from \"@vueuse/core\";\nimport { type Chart } from \"flowchart.ts\";\nimport {\n  type PropType,\n  type VNode,\n  computed,\n  defineComponent,\n  h,\n  onMounted,\n  ref,\n} from \"vue\";\nimport { LoadingIcon, atou } from \"vuepress-shared/client\";\n\nimport presets from \"../flowchart-preset/index.js\";\n\nimport \"../styles/flowchart.scss\";\n\ndeclare const MARKDOWN_ENHANCE_DELAY: number;\n\nexport default defineComponent({\n  name: \"FlowChart\",\n\n  props: {\n    /**\n     * Flowchart code content\n     *\n     * 流程图代码内容\n     */\n    code: { type: String, required: true },\n\n    /**\n     * Flowchart id\n     *\n     * 流程图 id\n     */\n    id: { type: String, required: true },\n\n    /**\n     * Flowchart preset\n     *\n     * 流程图预设\n     */\n    preset: {\n      type: String as PropType<\"ant\" | \"pie\" | \"vue\">,\n      default: \"vue\",\n    },\n  },\n\n  setup(props) {\n    let flowchart: Chart | null = null;\n    const element = ref<HTMLDivElement>();\n\n    const loading = ref(true);\n    const scale = ref(1);\n\n    const preset = computed<Record<string, unknown>>(() => {\n      const preset = presets[props.preset];\n\n      if (!preset) {\n        console.warn(`[md-enhance:flowchart] Unknown preset: ${props.preset}`);\n\n        return presets.vue;\n      }\n\n      return preset;\n    });\n\n    const getScale = (width: number): number =>\n      width < 419 ? 0.8 : width > 1280 ? 1 : 0.9;\n\n    onMounted(() => {\n      void Promise.all([\n        import(/* webpackChunkName: \"flowchart\" */ \"flowchart.ts\"),\n        // delay\n        new Promise((resolve) => setTimeout(resolve, MARKDOWN_ENHANCE_DELAY)),\n      ]).then(([{ parse }]) => {\n        flowchart = parse(atou(props.code));\n\n        // update scale\n        scale.value = getScale(window.innerWidth);\n\n        loading.value = false;\n\n        // draw svg to #id\n        flowchart.draw(props.id, { ...preset.value, scale: scale.value });\n      });\n\n      useEventListener(\n        \"resize\",\n        useDebounceFn(() => {\n          if (flowchart) {\n            const newScale = getScale(window.innerWidth);\n\n            if (scale.value !== newScale) {\n              scale.value = newScale;\n\n              flowchart.draw(props.id, { ...preset.value, scale: newScale });\n            }\n          }\n        }, 100)\n      );\n    });\n\n    return (): (VNode | null)[] => [\n      loading.value\n        ? h(LoadingIcon, { class: \"flowchart-loading\", height: 192 })\n        : null,\n      h(\"div\", {\n        ref: element,\n        class: [\"flowchart-wrapper\", props.preset],\n        id: props.id,\n        style: {\n          display: loading.value ? \"none\" : \"block\",\n        },\n      }),\n    ];\n  },\n});\n"],"names":["l","o","base","r","m","ant","vue","pie","FlowChart","defineComponent","props","flowchart","element","ref","loading","scale","preset","computed","presets","getScale","width","onMounted","resolve","parse","atou","useEventListener","useDebounceFn","newScale","h","LoadingIcon"],"mappings":"sPAAA,IAAeA,EAAA,CAEb,EAAG,EAEH,EAAG,EACH,aAAc,EACd,cAAe,GACf,cAAe,EACf,YAAa,GACb,aAAc,UACd,aAAc,UACd,gBAAiB,QACjB,KAAM,QACN,WAAY,MACZ,UAAW,KACX,YAAa,QACb,MAAO,CACT,ECfAC,EAAe,CACb,GAAGC,EAGH,QAAS,CACP,MAAO,CACL,MAAO,gBACP,aAAc,OACd,KAAM,UACN,aAAc,KAChB,EACA,IAAK,CACH,MAAO,cACP,aAAc,OACd,KAAM,UACN,aAAc,KAChB,EACA,UAAW,CACT,MAAO,oBACP,aAAc,OACd,KAAM,UACN,aAAc,KAChB,EACA,YAAa,CACX,MAAO,sBACP,aAAc,OACd,KAAM,UACN,aAAc,KAChB,EACA,WAAY,CACV,MAAO,qBACP,aAAc,OACd,KAAM,UACN,gBAAiB,OACjB,aAAc,KAChB,EACA,UAAW,CACT,MAAO,oBACP,aAAc,OACd,KAAM,UACN,aAAc,KAChB,EACA,SAAU,CACR,MAAO,mBACP,aAAc,OACd,KAAM,UACN,aAAc,KAChB,CACF,CACF,ECjDAC,EAAe,CACb,GAAGD,EAGH,aAAc,EACd,QAAS,CACP,MAAO,CACL,MAAO,gBACP,KAAM,OACN,aAAc,MACd,aAAc,UACd,aAAc,MAChB,EACA,IAAK,CACH,MAAO,cACP,KAAM,OACN,aAAc,MACd,aAAc,UACd,aAAc,MAChB,EACA,UAAW,CACT,MAAO,oBACP,KAAM,UACN,aAAc,MACd,aAAc,UACd,aAAc,MAChB,EACA,YAAa,CACX,MAAO,sBACP,KAAM,UACN,aAAc,MACd,aAAc,UACd,aAAc,MAChB,EACA,WAAY,CACV,MAAO,qBACP,KAAM,UACN,aAAc,MACd,aAAc,UACd,aAAc,MAChB,EACA,UAAW,CACT,MAAO,oBACP,KAAM,UACN,aAAc,MACd,aAAc,UACd,aAAc,MAChB,EACA,SAAU,CACR,MAAO,mBACP,KAAM,UACN,aAAc,MACd,aAAc,UACd,aAAc,MAChB,CACF,CACF,ECxDAE,EAAe,CACb,GAAGF,EAGH,QAAS,CACP,MAAO,CACL,MAAO,gBACP,aAAc,OACd,KAAM,UACN,aAAc,KAChB,EACA,IAAK,CACH,MAAO,cACP,aAAc,OACd,KAAM,UACN,aAAc,KAChB,EACA,UAAW,CACT,MAAO,oBACP,aAAc,OACd,KAAM,UACN,aAAc,KAChB,EACA,YAAa,CACX,MAAO,sBACP,aAAc,OACd,KAAM,UACN,aAAc,KAChB,EACA,WAAY,CACV,MAAO,qBACP,aAAc,OACd,KAAM,UACN,gBAAiB,OACjB,aAAc,KAChB,EACA,UAAW,CACT,MAAO,oBACP,aAAc,OACd,KAAM,UACN,aAAc,KAChB,EACA,SAAU,CACR,MAAO,mBACP,aAAc,OACd,KAAM,UACN,aAAc,KAChB,CACF,CACF,ECzCA,EAAe,CACb,IAAAG,EACA,IAAAC,EACA,IAAAC,CACF,ECKAC,EAAeC,EAAgB,CAC7B,KAAM,YAEN,MAAO,CAML,KAAM,CAAE,KAAM,OAAQ,SAAU,EAAK,EAOrC,GAAI,CAAE,KAAM,OAAQ,SAAU,EAAK,EAOnC,OAAQ,CACN,KAAM,OACN,QAAS,KACX,CACF,EAEA,MAAMC,EAAO,CACX,IAAIC,EAA0B,KAC9B,MAAMC,EAAUC,IAEVC,EAAUD,EAAI,EAAI,EAClBE,EAAQF,EAAI,CAAC,EAEbG,EAASC,EAAkC,IAChCC,EAAQR,EAAM,MAAM,IAGjC,QAAQ,KAAK,0CAA0CA,EAAM,QAAQ,EAE9DQ,EAAQ,IAIlB,EAEKC,EAAYC,GAChBA,EAAQ,IAAM,GAAMA,EAAQ,KAAO,EAAI,GAEzC,OAAAC,EAAU,IAAM,CACT,QAAQ,IAAI,CACf,OAA2C,cAAc,EAEzD,IAAI,QAASC,GAAY,WAAWA,EAAS,sBAAsB,CAAC,CACtE,CAAC,EAAE,KAAK,CAAC,CAAC,CAAE,MAAAC,CAAM,CAAC,IAAM,CACvBZ,EAAYY,EAAMC,EAAKd,EAAM,IAAI,CAAC,EAGlCK,EAAM,MAAQI,EAAS,OAAO,UAAU,EAExCL,EAAQ,MAAQ,GAGhBH,EAAU,KAAKD,EAAM,GAAI,CAAE,GAAGM,EAAO,MAAO,MAAOD,EAAM,KAAM,CAAC,CAClE,CAAC,EAEDU,EACE,SACAC,EAAc,IAAM,CAClB,GAAIf,EAAW,CACb,MAAMgB,EAAWR,EAAS,OAAO,UAAU,EAEvCJ,EAAM,QAAUY,IAClBZ,EAAM,MAAQY,EAEdhB,EAAU,KAAKD,EAAM,GAAI,CAAE,GAAGM,EAAO,MAAO,MAAOW,CAAS,CAAC,GAGnE,EAAG,GAAG,CACR,CACF,CAAC,EAEM,IAAwB,CAC7Bb,EAAQ,MACJc,EAAEC,EAAa,CAAE,MAAO,oBAAqB,OAAQ,GAAI,CAAC,EAC1D,KACJD,EAAE,MAAO,CACP,IAAKhB,EACL,MAAO,CAAC,oBAAqBF,EAAM,MAAM,EACzC,GAAIA,EAAM,GACV,MAAO,CACL,QAASI,EAAQ,MAAQ,OAAS,OACpC,CACF,CAAC,CACH,CACF,CACF,CAAC"}