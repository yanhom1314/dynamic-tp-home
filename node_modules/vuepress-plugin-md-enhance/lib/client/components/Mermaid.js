import{useMutationObserver as s}from"@vueuse/core";import{defineComponent as c,ref as d,computed as m,onMounted as u,watch as p,h as l}from"vue";import{atou as y,LoadingIcon as C}from"vuepress-shared/client";import"../styles/mermaid.scss";const b=e=>({dark:e,background:e?"#1e1e1e":"#fff",primaryColor:e?"#389d70":"#4abf8a",primaryBorderColor:e?"#389d70":"#4abf8a",primaryTextColor:"#fff",secondaryColor:"#ffb500",secondaryBorderColor:e?"#fff":"#000",secondaryTextColor:e?"#ddd":"#333",tertiaryColor:e?"#282828":"#efeef4",tertiaryBorderColor:e?"#bbb":"#242424",tertiaryTextColor:e?"#ddd":"#333",noteBkgColor:e?"#f6d365":"#fff5ad",noteTextColor:"#242424",noteBorderColor:e?"#f6d365":"#333",lineColor:e?"#d3d3d3":"#333",textColor:e?"#fff":"#242424",mainBkg:e?"#389d70":"#4abf8a",errorBkgColor:"#eb4d5d",errorTextColor:"#fff",nodeBorder:e?"#389d70":"#4abf8a",nodeTextColor:e?"#fff":"#242424",signalTextColor:e?"#9e9e9e":"#242424",classText:"#fff",labelColor:"#fff",fillType0:e?"#cf1322":"#f1636e",fillType1:"#f39c12",fillType2:"#2ecc71",fillType3:"#fa541c",fillType4:"#25a55b",fillType5:"#13c2c2",fillType6:"#096dd9",fillType7:"#aa6fe9"});var T=c({name:"Mermaid",props:{id:{type:String,required:!0},code:{type:String,required:!0}},setup(e){const i=d(),a=d(""),t=d(!1),n=m(()=>y(e.code)),f=async()=>Promise.all([import("@mermaid"),new Promise(o=>setTimeout(o,MARKDOWN_ENHANCE_DELAY))]).then(async([{default:o}])=>{const r={useMaxWidth:!1};o.initialize({theme:"base",themeVariables:b(t.value),flowchart:r,sequence:r,journey:r,gantt:r,er:r,pie:r,...MERMAID_OPTIONS,startOnLoad:!1}),a.value=(await o.render(e.id,n.value)).svg});return u(()=>{const o=document.documentElement,r=()=>o.classList.contains("dark")||o.getAttribute("data-theme")==="dark";t.value=r(),f(),s(o,()=>{t.value=r()},{attributeFilter:["class","data-theme"],attributes:!0}),p(t,()=>f())}),()=>l("div",{ref:i,class:"mermaid-wrapper"},a.value?l("div",{class:"mermaid-content",innerHTML:a.value}):l(C,{class:"mermaid-loading",height:96}))}});export{T as default};
//# sourceMappingURL=Mermaid.js.map
