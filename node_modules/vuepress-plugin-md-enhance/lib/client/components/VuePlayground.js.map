{"version":3,"file":"VuePlayground.js","sources":["../../../src/client/utils/playground.ts","../../../src/client/components/VuePlayground.ts"],"sourcesContent":["import { deepAssign } from \"vuepress-shared/client\";\n\nimport { type VuePlaygroundOptions } from \"../../shared/index.js\";\n\ndeclare const VUE_PLAYGROUND_OPTIONS: VuePlaygroundOptions;\n\nexport const getVuePlaygroundSettings = (\n  settings: string\n): VuePlaygroundOptions =>\n  deepAssign(\n    {},\n    VUE_PLAYGROUND_OPTIONS,\n    <VuePlaygroundOptions>JSON.parse(decodeURIComponent(settings))\n  );\n","import { type Repl, type ReplProps, type ReplStore } from \"@vue/repl\";\nimport {\n  type VNode,\n  computed,\n  defineComponent,\n  h,\n  onMounted,\n  ref,\n  shallowRef,\n} from \"vue\";\nimport { LoadingIcon } from \"vuepress-shared/client\";\n\nimport { getVuePlaygroundSettings } from \"../utils/playground.js\";\n\nimport \"@vue/repl/style.css\";\nimport \"../styles/vue-playground.scss\";\n\nexport default defineComponent({\n  name: \"VuePlayground\",\n\n  props: {\n    /**\n     * Playground title\n     *\n     * 演示标题\n     */\n    title: {\n      type: String,\n      default: \"\",\n    },\n\n    /**\n     * Playground file data\n     *\n     * 演示文件数据\n     */\n    files: { type: String, required: true },\n\n    /**\n     * Playground settings\n     *\n     * 演示设置\n     */\n    settings: { type: String, default: \"{}\" },\n  },\n\n  setup(props) {\n    const loading = ref(true);\n    const component = shallowRef<typeof Repl>();\n    const store = ref<ReplStore>();\n\n    const playgroundOptions = computed(() =>\n      getVuePlaygroundSettings(props.settings)\n    );\n\n    const setupRepl = async (): Promise<void> => {\n      const { ReplStore, Repl } = await import(\n        /* webpackChunkName: \"vue-repl\" */ \"@vue/repl\"\n      );\n\n      component.value = Repl;\n      store.value = new ReplStore({\n        serializedState: decodeURIComponent(props.files),\n      });\n\n      if (playgroundOptions.value.vueVersion)\n        await store.value.setVueVersion(playgroundOptions.value.vueVersion);\n    };\n\n    onMounted(async () => {\n      await setupRepl();\n      loading.value = false;\n    });\n\n    return (): (VNode | null)[] => [\n      h(\"div\", { class: \"vue-playground-wrapper\" }, [\n        props.title\n          ? h(\"div\", { class: \"header\" }, decodeURIComponent(props.title))\n          : null,\n        h(\n          \"div\",\n          {\n            class: \"repl-container\",\n          },\n          [\n            loading.value\n              ? h(LoadingIcon, { class: \"preview-loading\", height: 192 })\n              : null,\n            component.value\n              ? h(component.value, <ReplProps>{\n                  store: store.value,\n                  autoResize: true,\n                  ...playgroundOptions.value,\n                  layout: \"horizontal\",\n                })\n              : null,\n          ]\n        ),\n      ]),\n    ];\n  },\n});\n"],"names":["getVuePlaygroundSettings","settings","deepAssign","VuePlayground","defineComponent","props","loading","ref","component","shallowRef","store","playgroundOptions","computed","setupRepl","ReplStore","Repl","onMounted","h","LoadingIcon"],"mappings":"0OAMO,MAAMA,EACXC,GAEAC,EACE,GACA,uBACsB,KAAK,MAAM,mBAAmBD,CAAQ,CAAC,CAC/D,ECIF,IAAAE,EAAeC,EAAgB,CAC7B,KAAM,gBAEN,MAAO,CAML,MAAO,CACL,KAAM,OACN,QAAS,EACX,EAOA,MAAO,CAAE,KAAM,OAAQ,SAAU,EAAK,EAOtC,SAAU,CAAE,KAAM,OAAQ,QAAS,IAAK,CAC1C,EAEA,MAAMC,EAAO,CACX,MAAMC,EAAUC,EAAI,EAAI,EAClBC,EAAYC,IACZC,EAAQH,EAERI,EAAAA,EAAoBC,EAAS,IACjCZ,EAAyBK,EAAM,QAAQ,CACzC,EAEMQ,EAAY,SAA2B,CAC3C,KAAM,CAAE,UAAAC,EAAW,KAAAC,CAAK,EAAI,KAAM,QACG,WACrC,EAEAP,EAAU,MAAQO,EAClBL,EAAM,MAAQ,IAAII,EAAU,CAC1B,gBAAiB,mBAAmBT,EAAM,KAAK,CACjD,CAAC,EAEGM,EAAkB,MAAM,YAC1B,MAAMD,EAAM,MAAM,cAAcC,EAAkB,MAAM,UAAU,CACtE,EAEA,OAAAK,EAAU,SAAY,CACpB,MAAMH,IACNP,EAAQ,MAAQ,EAClB,CAAC,EAEM,IAAwB,CAC7BW,EAAE,MAAO,CAAE,MAAO,wBAAyB,EAAG,CAC5CZ,EAAM,MACFY,EAAE,MAAO,CAAE,MAAO,QAAS,EAAG,mBAAmBZ,EAAM,KAAK,CAAC,EAC7D,KACJY,EACE,MACA,CACE,MAAO,gBACT,EACA,CACEX,EAAQ,MACJW,EAAEC,EAAa,CAAE,MAAO,kBAAmB,OAAQ,GAAI,CAAC,EACxD,KACJV,EAAU,MACNS,EAAET,EAAU,MAAkB,CAC5B,MAAOE,EAAM,MACb,WAAY,GACZ,GAAGC,EAAkB,MACrB,OAAQ,YACV,CAAC,EACD,IACN,CACF,CACF,CAAC,CACH,CACF,CACF,CAAC"}