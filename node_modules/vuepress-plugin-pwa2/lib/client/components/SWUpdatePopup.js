import{defineComponent as s,ref as r,computed as i,onMounted as d,h as t,Transition as c}from"vue";import{useLocaleConfig as m}from"vuepress-shared/client";import{l as v,U as f}from"../define-3fd15ee3.js";import"../styles/popup.scss";import{u as g}from"../usePWAEvent-a0a43ffb.js";const W=n=>{const e=n.waiting;if(!e)return;const p=new MessageChannel;e.postMessage({type:"SKIP_WAITING"},[p.port2])};var w=s({name:"SWUpdatePopup",setup(n,{slots:e}){const p=m(v),a=r(),u=i(()=>!!a.value),l=()=>{a.value&&(W(a.value),a.value=void 0)};return d(()=>{g().on("updated",o=>{o&&(a.value=o)})}),()=>t(c,{name:"popup"},()=>{var o;return((o=e.default)==null?void 0:o.call(e,{enabled:u.value,reload:l}))||(u.value?t("button",{class:"sw-update-popup",tabindex:0,onClick:()=>l()},[p.value.update,t("span",{class:"icon-wrapper"},t(f))]):null)})}});export{w as default};
//# sourceMappingURL=SWUpdatePopup.js.map
