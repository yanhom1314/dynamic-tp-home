{"version":3,"file":"articleInfo-53f5acd1.js","sources":["../../src/client/modules/blog/composables/articleInfo.ts"],"sourcesContent":["import { type ComputedRef, type Ref, computed, toRef } from \"vue\";\nimport {\n  type AuthorInfo,\n  type DateInfo,\n  getAuthor,\n  getCategory,\n  getDate,\n  getTag,\n} from \"vuepress-shared/client\";\n\nimport { useThemeLocaleData } from \"@theme-hope/composables/index\";\nimport { type PageInfoProps } from \"@theme-hope/modules/info/components/PageInfo\";\nimport {\n  type PageCategory,\n  type PageTag,\n} from \"@theme-hope/modules/info/utils/index\";\n\nimport { useCategoryMap } from \"./categoryMap.js\";\nimport { useBlogOptions } from \"./options.js\";\nimport { useTagMap } from \"./tagMap.js\";\nimport {\n  type ArticleInfo,\n  ArticleInfoType,\n  type PageInfo,\n} from \"../../../../shared/index.js\";\n\nexport type AuthorRef = ComputedRef<AuthorInfo[]>;\n\nexport const useArticleAuthor = (info: Ref<ArticleInfo>): AuthorRef => {\n  const themeLocale = useThemeLocaleData();\n\n  return computed(() => {\n    const { [ArticleInfoType.author]: author } = info.value;\n\n    if (author) return getAuthor(author);\n    if (author === false) return [];\n\n    return getAuthor(themeLocale.value.author, false);\n  });\n};\n\nexport type CategoryRef = ComputedRef<PageCategory[]>;\n\nexport const useArticleCategory = (info: Ref<ArticleInfo>): CategoryRef => {\n  const categoryMap = useCategoryMap();\n\n  return computed(() =>\n    getCategory(info.value[ArticleInfoType.category]).map((name) => ({\n      name,\n      path: categoryMap.value.map[name].path,\n    }))\n  );\n};\n\nexport type TagRef = ComputedRef<PageTag[]>;\n\nexport const useArticleTag = (info: Ref<ArticleInfo>): TagRef => {\n  const tagMap = useTagMap();\n\n  return computed(() =>\n    getTag(info.value[ArticleInfoType.tag]).map((name) => ({\n      name,\n      path: tagMap.value.map[name].path,\n    }))\n  );\n};\n\nexport type DateRef = ComputedRef<DateInfo | null>;\n\nexport const useArticleDate = (info: Ref<ArticleInfo>): DateRef =>\n  computed(() => {\n    const { [ArticleInfoType.date]: date } = info.value;\n\n    return date ? getDate(date) : null;\n  });\n\nexport const useArticleInfo = (props: {\n  info: ArticleInfo;\n  path: string;\n}): {\n  info: ComputedRef<PageInfoProps>;\n  items: ComputedRef<PageInfo[] | false | undefined>;\n} => {\n  const articleInfo = toRef(props, \"info\");\n  const blogOptions = useBlogOptions();\n  const author = useArticleAuthor(articleInfo);\n  const category = useArticleCategory(articleInfo);\n  const tag = useArticleTag(articleInfo);\n  const date = useArticleDate(articleInfo);\n\n  const info = computed(() => ({\n    author: author.value,\n    category: category.value,\n    date: date.value,\n    localizedDate: articleInfo.value[ArticleInfoType.localizedDate] || \"\",\n    tag: tag.value,\n    isOriginal: articleInfo.value[ArticleInfoType.isOriginal] || false,\n    readingTime: articleInfo.value[ArticleInfoType.readingTime] || null,\n    pageview: props.path,\n  }));\n\n  const items = computed(() => blogOptions.value.articleInfo);\n\n  return { info, items };\n};\n"],"names":["useArticleAuthor","info","themeLocale","useThemeLocaleData","computed","ArticleInfoType","author","getAuthor","useArticleCategory","categoryMap","useCategoryMap","getCategory","name","useArticleTag","tagMap","useTagMap","getTag","useArticleDate","date","getDate","useArticleInfo","props","articleInfo","toRef","blogOptions","useBlogOptions","category","tag","items"],"mappings":"oRA4BO,MAAMA,EAAoBC,GAAsC,CACrE,MAAMC,EAAcC,EAEpB,EAAA,OAAOC,EAAS,IAAM,CACpB,KAAM,CAAE,CAACC,EAAgB,MAAM,EAAGC,CAAO,EAAIL,EAAK,MAElD,OAAIK,EAAeC,EAAUD,CAAM,EAC/BA,IAAW,GAAc,CAAA,EAEtBC,EAAUL,EAAY,MAAM,OAAQ,EAAK,CAClD,CAAC,CACH,EAIaM,EAAsBP,GAAwC,CACzE,MAAMQ,EAAcC,IAEpB,OAAON,EAAS,IACdO,EAAYV,EAAK,MAAMI,EAAgB,QAAQ,CAAC,EAAE,IAAKO,IAAU,CAC/D,KAAAA,EACA,KAAMH,EAAY,MAAM,IAAIG,CAAI,EAAE,IACpC,EAAE,CACJ,CACF,EAIaC,EAAiBZ,GAAmC,CAC/D,MAAMa,EAASC,EAAU,EAEzB,OAAOX,EAAS,IACdY,EAAOf,EAAK,MAAMI,EAAgB,GAAG,CAAC,EAAE,IAAKO,IAAU,CACrD,KAAAA,EACA,KAAME,EAAO,MAAM,IAAIF,CAAI,EAAE,IAC/B,EAAE,CACJ,CACF,EAIaK,EAAkBhB,GAC7BG,EAAS,IAAM,CACb,KAAM,CAAE,CAACC,EAAgB,IAAI,EAAGa,CAAK,EAAIjB,EAAK,MAE9C,OAAOiB,EAAOC,EAAQD,CAAI,EAAI,IAChC,CAAC,EAEUE,EAAkBC,GAM1B,CACH,MAAMC,EAAcC,EAAMF,EAAO,MAAM,EACjCG,EAAcC,EAAe,EAC7BnB,EAASN,EAAiBsB,CAAW,EACrCI,EAAWlB,EAAmBc,CAAW,EACzCK,EAAMd,EAAcS,CAAW,EAC/BJ,EAAOD,EAAeK,CAAW,EAEjCrB,EAAOG,EAAS,KAAO,CAC3B,OAAQE,EAAO,MACf,SAAUoB,EAAS,MACnB,KAAMR,EAAK,MACX,cAAeI,EAAY,MAAMjB,EAAgB,aAAa,GAAK,GACnE,IAAKsB,EAAI,MACT,WAAYL,EAAY,MAAMjB,EAAgB,UAAU,GAAK,GAC7D,YAAaiB,EAAY,MAAMjB,EAAgB,WAAW,GAAK,KAC/D,SAAUgB,EAAM,IAClB,EAAE,EAEIO,EAAQxB,EAAS,IAAMoB,EAAY,MAAM,WAAW,EAE1D,MAAO,CAAE,KAAAvB,EAAM,MAAA2B,CAAM,CACvB"}