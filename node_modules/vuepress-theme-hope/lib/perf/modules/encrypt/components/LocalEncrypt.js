import{computed as v,defineComponent as d,ref as y,onMounted as g,h as E}from"vue";import{u as h,c as S}from"../../../utils-51ab35d8.js";import{usePageData as P}from"@vuepress/client";import{isPlainObject as D}from"@vuepress/shared";import{useStorage as k,useSessionStorage as O}from"@vueuse/core";import{keys as T,startsWith as _}from"vuepress-shared/client";import{compareSync as b}from"bcrypt-ts/browser";import"../../../themeData-00bcbd16.js";import"@vuepress/plugin-theme-data/client";const p=(n="",t)=>!!n&&b(n,t),f="VUEPRESS_HOPE_PATH_TOKEN",H=()=>{const n=P(),t=h(),u=k(f,{}),s=O(f,{}),c=o=>D(t.value.config)?T(t.value.config).filter(e=>_(decodeURI(o),e)).sort((e,r)=>r.length-e.length):[],i=o=>{const e=c(o);if(e.length>0){const{config:r={}}=t.value;return{isEncrypted:!0,isDecrypted:e.some(a=>u.value[a]&&r[a].some(l=>p(u.value[a],l))||s.value[a]&&r[a].some(l=>p(s.value[a],l)))}}return{isDecrypted:!1,isEncrypted:!1}};return{status:v(()=>i(n.value.path)),getStatus:i,validate:(o,e=!1)=>{const{config:r={}}=t.value,a=c(n.value.path);for(const l of a)if(r[l].filter(m=>p(o,m))){(e?u:s).value[l]=o;break}}}};var L=d({name:"LocalEncrypt",setup(n,{slots:t}){const{status:u,validate:s}=H(),c=y(!1);return g(()=>{c.value=!0}),()=>{var i,o;const{isEncrypted:e,isDecrypted:r}=u.value;return e?c.value?r?((i=t.default)==null?void 0:i.call(t))||null:E(S,{full:!0,onVerify:s}):null:((o=t.default)==null?void 0:o.call(t))||null}}});export{L as default};
//# sourceMappingURL=LocalEncrypt.js.map
