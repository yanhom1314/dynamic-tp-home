{"version":3,"file":"pageInfo-5ef8f837.js","sources":["../../src/client/composables/mobile.ts","../../src/client/composables/pageInfo.ts"],"sourcesContent":["import { useEventListener } from \"@vueuse/core\";\nimport { type Ref, onMounted, ref } from \"vue\";\n\nimport { useThemeData } from \"./themeData.js\";\n\nexport interface WindowSizeRef {\n  isMobile: Ref<boolean>;\n  isWide: Ref<boolean>;\n}\n\nexport const useWindowSize = (): WindowSizeRef => {\n  const themeData = useThemeData();\n  const isMobile = ref(false);\n  const isWide = ref(false);\n\n  const windowSizeHandler = (): void => {\n    isMobile.value =\n      window.innerWidth <= (themeData.value.mobileBreakPoint || 719);\n    isWide.value =\n      window.innerWidth >= (themeData.value.wideBreakPoint || 1440);\n  };\n\n  onMounted(() => {\n    windowSizeHandler();\n    useEventListener(\"resize\", windowSizeHandler, false);\n    useEventListener(\"orientationchange\", windowSizeHandler, false);\n  });\n\n  return {\n    isMobile,\n    isWide,\n  };\n};\n","import { usePageData, usePageFrontmatter } from \"@vuepress/client\";\nimport { type GitData } from \"@vuepress/plugin-git\";\nimport { type ComputedRef, computed, inject } from \"vue\";\nimport { type ReadingTime } from \"vuepress-plugin-reading-time2\";\nimport {\n  type AuthorInfo,\n  type BasePageFrontMatter,\n  type DateInfo,\n  getAuthor,\n  getCategory,\n  getDate,\n  getTag,\n} from \"vuepress-shared/client\";\n\nimport { type CategoryMapRef } from \"@theme-hope/modules/blog/composables/index\";\nimport { type PageInfoProps } from \"@theme-hope/modules/info/components/PageInfo\";\nimport {\n  type PageCategory,\n  type PageTag,\n} from \"@theme-hope/modules/info/utils/index\";\n\nimport { useThemeLocaleData } from \"./themeData.js\";\nimport {\n  type PageInfo,\n  type ThemeNormalPageFrontmatter,\n} from \"../../shared/index.js\";\n\ndeclare const ENABLE_BLOG: boolean;\n\nexport const usePageAuthor = (): ComputedRef<AuthorInfo[]> => {\n  const themeLocale = useThemeLocaleData();\n  const frontmatter = usePageFrontmatter<BasePageFrontMatter>();\n\n  return computed(() => {\n    const { author } = frontmatter.value;\n\n    if (author) return getAuthor(author);\n    if (author === false) return [];\n\n    return getAuthor(themeLocale.value.author, false);\n  });\n};\n\nexport const usePageCategory = (): ComputedRef<PageCategory[]> => {\n  const frontmatter = usePageFrontmatter<BasePageFrontMatter>();\n\n  return computed(() =>\n    getCategory(frontmatter.value.category).map((name) => ({\n      name,\n      // this is a hack\n      path: ENABLE_BLOG\n        ? inject<CategoryMapRef>(Symbol.for(\"categoryMap\"))?.value.map[name]\n            ?.path || \"\"\n        : \"\",\n    }))\n  );\n};\n\nexport const usePageTag = (): ComputedRef<PageTag[]> => {\n  const frontmatter = usePageFrontmatter<BasePageFrontMatter>();\n\n  return computed(() =>\n    getTag(frontmatter.value.tag).map((name) => ({\n      name,\n      // this is a hack\n      path: ENABLE_BLOG\n        ? inject<CategoryMapRef>(Symbol.for(\"tagMap\"))?.value.map[name]?.path ||\n          \"\"\n        : \"\",\n    }))\n  );\n};\n\nexport const usePageDate = (): ComputedRef<DateInfo | null> => {\n  const frontmatter = usePageFrontmatter<BasePageFrontMatter>();\n  const page = usePageData<{ git?: GitData }>();\n\n  return computed(() => {\n    const { date } = frontmatter.value;\n\n    if (date) return getDate(date);\n\n    const { createdTime } = page.value.git || {};\n\n    if (createdTime) return getDate(new Date(createdTime));\n\n    return null;\n  });\n};\n\nexport const usePageInfo = (): {\n  info: ComputedRef<PageInfoProps>;\n  items: ComputedRef<PageInfo[] | false | null>;\n} => {\n  const themeLocale = useThemeLocaleData();\n  const page = usePageData<{\n    git?: GitData;\n    localizedDate: string;\n    readingTime?: ReadingTime;\n  }>();\n  const frontmatter = usePageFrontmatter<ThemeNormalPageFrontmatter>();\n  const author = usePageAuthor();\n  const category = usePageCategory();\n  const tag = usePageTag();\n  const date = usePageDate();\n\n  const info = computed<PageInfoProps>(() => ({\n    author: author.value,\n    category: category.value,\n    date: date.value,\n    localizedDate: page.value.localizedDate,\n    tag: tag.value,\n    isOriginal: frontmatter.value.isOriginal || false,\n    readingTime: page.value.readingTime || null,\n    pageview:\n      \"pageview\" in frontmatter.value ? frontmatter.value.pageview : true,\n  }));\n\n  const items = computed(() =>\n    \"pageInfo\" in frontmatter.value\n      ? frontmatter.value.pageInfo\n      : \"pageInfo\" in themeLocale.value\n      ? themeLocale.value.pageInfo\n      : null\n  );\n\n  return { info, items };\n};\n"],"names":["useWindowSize","themeData","useThemeData","isMobile","ref","isWide","windowSizeHandler","onMounted","useEventListener","usePageAuthor","themeLocale","useThemeLocaleData","frontmatter","usePageFrontmatter","computed","author","getAuthor","usePageCategory","getCategory","name","_a","_b","inject","usePageTag","getTag","usePageDate","page","usePageData","date","getDate","createdTime","usePageInfo","category","tag","info","items"],"mappings":"0UAUO,MAAMA,EAAgB,IAAqB,CAChD,MAAMC,EAAYC,EAAa,EACzBC,EAAWC,EAAI,EAAK,EACpBC,EAASD,EAAI,EAAK,EAElBE,EAAoB,IAAY,CACpCH,EAAS,MACP,OAAO,aAAeF,EAAU,MAAM,kBAAoB,KAC5DI,EAAO,MACL,OAAO,aAAeJ,EAAU,MAAM,gBAAkB,KAC5D,EAEA,OAAAM,EAAU,IAAM,CACdD,IACAE,EAAiB,SAAUF,EAAmB,EAAK,EACnDE,EAAiB,oBAAqBF,EAAmB,EAAK,CAChE,CAAC,EAEM,CACL,SAAAH,EACA,OAAAE,CACF,CACF,ECHaI,EAAgB,IAAiC,CAC5D,MAAMC,EAAcC,IACdC,EAAcC,EAEpB,EAAA,OAAOC,EAAS,IAAM,CACpB,KAAM,CAAE,OAAAC,CAAO,EAAIH,EAAY,MAE/B,OAAIG,EAAeC,EAAUD,CAAM,EAC/BA,IAAW,GAAc,CAAA,EAEtBC,EAAUN,EAAY,MAAM,OAAQ,EAAK,CAClD,CAAC,CACH,EAEaO,EAAkB,IAAmC,CAChE,MAAML,EAAcC,IAEpB,OAAOC,EAAS,IACdI,EAAYN,EAAY,MAAM,QAAQ,EAAE,IAAKO,GAAM,CA/CvD,IAAAC,EAAAC,EA+C2D,MACrD,CAAA,KAAAF,EAEA,KAAM,eACFE,GAAAD,EAAAE,EAAuB,OAAO,IAAI,aAAa,CAAC,IAAhD,KAAA,OAAAF,EAAmD,MAAM,IAAID,CAA7D,IAAA,KAAA,OAAAE,EACI,OAAQ,EAElB,CAAE,CAAA,CACJ,CACF,EAEaE,EAAa,IAA8B,CACtD,MAAMX,EAAcC,EAAwC,EAE5D,OAAOC,EAAS,IACdU,EAAOZ,EAAY,MAAM,GAAG,EAAE,IAAKO,GAAM,CA9D7C,IAAAC,EAAAC,EA8DiD,MAC3C,CAAA,KAAAF,EAEA,KAAM,eACFE,GAAAD,EAAAE,EAAuB,OAAO,IAAI,QAAQ,CAAC,IAA3C,KAAAF,OAAAA,EAA8C,MAAM,IAAID,CAAxD,IAAA,KAAA,OAAAE,EAA+D,OAC/D,EAEN,CAAE,CAAA,CACJ,CACF,EAEaI,EAAc,IAAoC,CAC7D,MAAMb,EAAcC,EAAwC,EACtDa,EAAOC,EAAAA,EAEb,OAAOb,EAAS,IAAM,CACpB,KAAM,CAAE,KAAAc,CAAK,EAAIhB,EAAY,MAE7B,GAAIgB,EAAM,OAAOC,EAAQD,CAAI,EAE7B,KAAM,CAAE,YAAAE,CAAY,EAAIJ,EAAK,MAAM,KAAO,CAAA,EAE1C,OAAII,EAAoBD,EAAQ,IAAI,KAAKC,CAAW,CAAC,EAE9C,IACT,CAAC,CACH,EAEaC,EAAc,IAGtB,CACH,MAAMrB,EAAcC,EAAmB,EACjCe,EAAOC,EAIV,EACGf,EAAcC,EAAAA,EACdE,EAASN,EACTuB,EAAAA,EAAWf,EAAgB,EAC3BgB,EAAMV,EAAA,EACNK,EAAOH,EAEPS,EAAAA,EAAOpB,EAAwB,KAAO,CAC1C,OAAQC,EAAO,MACf,SAAUiB,EAAS,MACnB,KAAMJ,EAAK,MACX,cAAeF,EAAK,MAAM,cAC1B,IAAKO,EAAI,MACT,WAAYrB,EAAY,MAAM,YAAc,GAC5C,YAAac,EAAK,MAAM,aAAe,KACvC,SACE,aAAcd,EAAY,MAAQA,EAAY,MAAM,SAAW,EACnE,EAAE,EAEIuB,EAAQrB,EAAS,IACrB,aAAcF,EAAY,MACtBA,EAAY,MAAM,SAClB,aAAcF,EAAY,MAC1BA,EAAY,MAAM,SAClB,IACN,EAEA,MAAO,CAAE,KAAAwB,EAAM,MAAAC,CAAM,CACvB"}