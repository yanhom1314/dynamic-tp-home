{"version":3,"file":"timelines-33c41483.js","sources":["../../src/client/modules/blog/composables/categoryMap.ts","../../src/client/modules/blog/composables/options.ts","../../src/client/modules/blog/composables/tagMap.ts","../../src/client/modules/blog/composables/articles.ts","../../src/client/modules/blog/composables/timelines.ts"],"sourcesContent":["import { type ComputedRef, type InjectionKey, inject, provide } from \"vue\";\nimport {\n  type BlogCategoryData,\n  useBlogCategory,\n} from \"vuepress-plugin-blog2/client\";\n\nimport { type ArticleInfo } from \"../../../../shared/index.js\";\n\nexport type CategoryMapRef = ComputedRef<BlogCategoryData<ArticleInfo>>;\n\nexport const categoryMapSymbol: InjectionKey<CategoryMapRef> =\n  Symbol.for(\"categoryMap\");\n\n/**\n * Inject categoryMap\n */\nexport const useCategoryMap = (): CategoryMapRef => {\n  const categoryMap = inject(categoryMapSymbol);\n\n  if (!categoryMap)\n    throw new Error(\"useCategoryMap() is called without provider.\");\n\n  return categoryMap;\n};\n\n/**\n * Provide categoryMap\n */\nexport const setupCategoryMap = (): void => {\n  const categoryMap = useBlogCategory<ArticleInfo>(\"category\");\n\n  provide(categoryMapSymbol, categoryMap);\n};\n","import { type ComputedRef, computed } from \"vue\";\n\nimport {\n  useThemeData,\n  useThemeLocaleData,\n} from \"@theme-hope/composables/index\";\n\nimport { type BlogLocaleConfig } from \"../../../../shared/index.js\";\n\nexport const useBlogOptions = (): ComputedRef<BlogLocaleConfig> => {\n  const themeData = useThemeData();\n  const themeLocale = useThemeLocaleData();\n\n  return computed(() => ({\n    ...themeData.value.blog,\n    ...themeLocale.value.blog,\n  }));\n};\n","import { type ComputedRef, type InjectionKey, inject, provide } from \"vue\";\nimport {\n  type BlogCategoryData,\n  useBlogCategory,\n} from \"vuepress-plugin-blog2/client\";\n\nimport { type ArticleInfo } from \"../../../../shared/index.js\";\n\nexport type TagMapRef = ComputedRef<BlogCategoryData<ArticleInfo>>;\n\nexport const tagMapSymbol: InjectionKey<TagMapRef> = Symbol.for(\"tagMap\");\n\n/**\n * Inject tagMap\n */\nexport const useTagMap = (): TagMapRef => {\n  const tagMap = inject(tagMapSymbol);\n\n  if (!tagMap) throw new Error(\"useTagMap() is called without provider.\");\n\n  return tagMap;\n};\n\n/**\n * Provide tagMap\n */\nexport const setupTagMap = (): void => {\n  const tagMap = useBlogCategory<ArticleInfo>(\"tag\");\n\n  provide(tagMapSymbol, tagMap);\n};\n","import { type ComputedRef, type InjectionKey, inject, provide } from \"vue\";\nimport { type BlogTypeData, useBlogType } from \"vuepress-plugin-blog2/client\";\n\nimport { type ArticleInfo } from \"../../../../shared/index.js\";\n\nexport type ArticlesRef = ComputedRef<BlogTypeData<ArticleInfo>>;\n\nexport const articlesSymbol: InjectionKey<ArticlesRef> = Symbol.for(\"articles\");\n\n/**\n * Inject articles\n */\nexport const useArticles = (): ArticlesRef => {\n  const articles = inject(articlesSymbol);\n\n  if (!articles) throw new Error(\"useArticles() is called without provider.\");\n\n  return articles;\n};\n\nexport const setupArticles = (): void => {\n  const articles = useBlogType<ArticleInfo>(\"article\");\n\n  provide(articlesSymbol, articles);\n};\n","import {\n  type ComputedRef,\n  type InjectionKey,\n  computed,\n  inject,\n  provide,\n} from \"vue\";\nimport { type Article, useBlogType } from \"vuepress-plugin-blog2/client\";\nimport { getDate } from \"vuepress-shared/client\";\n\nimport { type ArticleInfo, ArticleInfoType } from \"../../../../shared/index.js\";\n\nexport interface TimelineItem {\n  year: number;\n  items: { date: string; path: string; info: ArticleInfo }[];\n}\n\nexport type TimelinesRef = ComputedRef<{\n  path: string;\n  config: TimelineItem[];\n  items: Article<ArticleInfo>[];\n}>;\n\nexport const timelinesSymbol: InjectionKey<TimelinesRef> =\n  Symbol.for(\"timelines\");\n\n/**\n * Inject timelines\n */\nexport const useTimelines = (): TimelinesRef => {\n  const timelines = inject(timelinesSymbol);\n\n  if (!timelines) throw new Error(\"useTimelines() is called without provider.\");\n\n  return timelines;\n};\n\n/**\n * Provide timelines\n */\nexport const setupTimelines = (): void => {\n  const timelines = useBlogType<ArticleInfo>(\"timeline\");\n\n  const timelineItems = computed(() => {\n    const timelineItems: TimelineItem[] = [];\n\n    // filter before sort\n    timelines.value.items.forEach(({ info, path }) => {\n      const { year, month, day } =\n        getDate(info[ArticleInfoType.date])?.info || {};\n\n      if (year && month && day) {\n        if (!timelineItems[0] || timelineItems[0].year !== year)\n          timelineItems.unshift({ year, items: [] });\n\n        timelineItems[0].items.push({\n          date: `${month}/${day}`,\n          info,\n          path,\n        });\n      }\n    });\n\n    return {\n      ...timelines.value,\n      config: timelineItems.reverse(),\n    };\n  });\n\n  provide(timelinesSymbol, timelineItems);\n};\n"],"names":["categoryMapSymbol","useCategoryMap","categoryMap","inject","setupCategoryMap","useBlogCategory","provide","useBlogOptions","themeData","useThemeData","themeLocale","useThemeLocaleData","computed","tagMapSymbol","useTagMap","tagMap","setupTagMap","articlesSymbol","useArticles","articles","setupArticles","useBlogType","timelinesSymbol","useTimelines","timelines","setupTimelines","timelineItems","info","path","_a","year","month","day","getDate","ArticleInfoType"],"mappings":"mRAUO,MAAMA,EACX,OAAO,IAAI,aAAa,EAKbC,EAAiB,IAAsB,CAClD,MAAMC,EAAcC,EAAOH,CAAiB,EAE5C,GAAI,CAACE,EACH,MAAM,IAAI,MAAM,8CAA8C,EAEhE,OAAOA,CACT,EAKaE,EAAmB,IAAY,CAC1C,MAAMF,EAAcG,EAA6B,UAAU,EAE3DC,EAAQN,EAAmBE,CAAW,CACxC,ECvBaK,EAAiB,IAAqC,CACjE,MAAMC,EAAYC,EAAAA,EACZC,EAAcC,EAAmB,EAEvC,OAAOC,EAAS,KAAO,CACrB,GAAGJ,EAAU,MAAM,KACnB,GAAGE,EAAY,MAAM,IACvB,EAAE,CACJ,ECPaG,EAAwC,OAAO,IAAI,QAAQ,EAK3DC,EAAY,IAAiB,CACxC,MAAMC,EAASZ,EAAOU,CAAY,EAElC,GAAI,CAACE,EAAQ,MAAM,IAAI,MAAM,yCAAyC,EAEtE,OAAOA,CACT,EAKaC,EAAc,IAAY,CACrC,MAAMD,EAASV,EAA6B,KAAK,EAEjDC,EAAQO,EAAcE,CAAM,CAC9B,ECvBaE,EAA4C,OAAO,IAAI,UAAU,EAKjEC,EAAc,IAAmB,CAC5C,MAAMC,EAAWhB,EAAOc,CAAc,EAEtC,GAAI,CAACE,EAAU,MAAM,IAAI,MAAM,2CAA2C,EAE1E,OAAOA,CACT,EAEaC,EAAgB,IAAY,CACvC,MAAMD,EAAWE,EAAyB,SAAS,EAEnDf,EAAQW,EAAgBE,CAAQ,CAClC,ECDaG,EACX,OAAO,IAAI,WAAW,EAKXC,EAAe,IAAoB,CAC9C,MAAMC,EAAYrB,EAAOmB,CAAe,EAExC,GAAI,CAACE,EAAW,MAAM,IAAI,MAAM,4CAA4C,EAE5E,OAAOA,CACT,EAKaC,EAAiB,IAAY,CACxC,MAAMD,EAAYH,EAAyB,UAAU,EAE/CK,EAAgBd,EAAS,IAAM,CACnC,MAAMc,EAAgC,CAAC,EAGvC,OAAAF,EAAU,MAAM,MAAM,QAAQ,CAAC,CAAE,KAAAG,EAAM,KAAAC,CAAK,IAAM,CA/CtD,IAAAC,EAgDM,KAAM,CAAE,KAAAC,EAAM,MAAAC,EAAO,IAAAC,CAAI,IACvBH,EAAAI,EAAQN,EAAKO,EAAgB,IAAI,CAAC,IAAlC,YAAAL,EAAqC,OAAQ,GAE3CC,GAAQC,GAASC,KACf,CAACN,EAAc,CAAC,GAAKA,EAAc,CAAC,EAAE,OAASI,IACjDJ,EAAc,QAAQ,CAAE,KAAAI,EAAM,MAAO,EAAG,CAAC,EAE3CJ,EAAc,CAAC,EAAE,MAAM,KAAK,CAC1B,KAAM,GAAGK,KAASC,IAClB,KAAAL,EACA,KAAAC,CACF,CAAC,EAEL,CAAC,EAEM,CACL,GAAGJ,EAAU,MACb,OAAQE,EAAc,QAAQ,CAChC,CACF,CAAC,EAEDpB,EAAQgB,EAAiBI,CAAa,CACxC"}