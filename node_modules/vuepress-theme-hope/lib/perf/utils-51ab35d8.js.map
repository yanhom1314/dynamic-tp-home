{"version":3,"file":"utils-51ab35d8.js","sources":["../../src/client/modules/encrypt/components/icons.ts","../../src/client/modules/encrypt/components/PasswordModal.ts","../../src/client/modules/encrypt/composables/utils.ts"],"sourcesContent":["import { type FunctionalComponent, h } from \"vue\";\nimport { IconBase } from \"vuepress-shared/client\";\n\nexport const LockIcon: FunctionalComponent = () =>\n  h(IconBase, { name: \"lock\" }, () =>\n    h(\"path\", {\n      d: \"M787.168 952.268H236.832c-30.395 0-55.033-24.638-55.033-55.033V429.45c0-30.395 24.638-55.034 55.033-55.034h82.55V264.35c0-106.38 86.238-192.618 192.618-192.618S704.618 157.97 704.618 264.35v110.066h82.55c30.395 0 55.033 24.639 55.033 55.034v467.785c0 30.395-24.639 55.033-55.033 55.033zM484.483 672.046v115.122h55.034V672.046c31.99-11.373 55.033-41.605 55.033-77.496 0-45.592-36.958-82.55-82.55-82.55s-82.55 36.958-82.55 82.55c0 35.89 23.042 66.123 55.033 77.496zM622.067 264.35c0-60.788-49.28-110.067-110.067-110.067s-110.067 49.28-110.067 110.067v110.066h220.135V264.35z\",\n    })\n  );\n\nLockIcon.displayName = \"LockIcon\";\n","import { usePageFrontmatter } from \"@vuepress/client\";\nimport { type VNode, computed, defineComponent, h, nextTick, ref } from \"vue\";\n\nimport { useThemeLocaleData } from \"@theme-hope/composables/index\";\n\nimport { LockIcon } from \"./icons.js\";\n\nimport \"../styles/password-modal.scss\";\n\nexport default defineComponent({\n  name: \"PasswordModal\",\n\n  props: {\n    /**\n     * Whether is fullscreen\n     *\n     * 是否是全屏\n     */\n    full: Boolean,\n  },\n\n  emits: [\"verify\"],\n\n  setup(props, { emit }) {\n    const frontmatter = usePageFrontmatter();\n    const themeLocale = useThemeLocaleData();\n    const password = ref(\"\");\n    const hasTried = ref(false);\n    const remember = ref(false);\n\n    const locale = computed(() => themeLocale.value.encryptLocales);\n\n    let hintHandler: number | null = null;\n\n    const verify = (): void => {\n      // clear previous handler\n      if (hintHandler) clearTimeout(hintHandler);\n      hasTried.value = false;\n\n      emit(\"verify\", password.value, remember.value);\n\n      void nextTick().then(() => {\n        hasTried.value = true;\n\n        hintHandler = setTimeout(() => {\n          hasTried.value = false;\n        }, 1000) as unknown as number;\n      });\n    };\n\n    return (): VNode =>\n      h(\n        \"div\",\n        {\n          class: [\n            \"password-layer\",\n            { expand: props.full || frontmatter.value[\"home\"] },\n          ],\n        },\n        h(\"div\", { class: \"password-modal\" }, [\n          h(\n            \"div\",\n            { class: [\"hint\", { tried: hasTried.value }] },\n            hasTried.value\n              ? locale.value.errorHint\n              : h(LockIcon, { \"aria-label\": locale.value.iconLabel })\n          ),\n          h(\"div\", { class: \"password\" }, [\n            h(\"input\", {\n              type: \"password\",\n              value: password.value,\n              placeholder: locale.value.placeholder,\n              onInput: ({ target }: InputEvent) => {\n                password.value = (<HTMLInputElement>target).value;\n              },\n              onKeydown: ({ key }: KeyboardEvent) => {\n                if (key === \"Enter\") verify();\n              },\n            }),\n          ]),\n          h(\"div\", { class: \"remember-password\" }, [\n            h(\"input\", {\n              type: \"checkbox\",\n              value: remember.value,\n              onChange: () => (remember.value = !remember.value),\n            }),\n            locale.value.remember,\n          ]),\n          h(\"button\", { class: \"submit\", onClick: () => verify() }, \"OK\"),\n        ])\n      );\n  },\n});\n","import { type ComputedRef, computed } from \"vue\";\n\nimport { useThemeData } from \"@theme-hope/composables/index\";\n\nimport { type EncryptConfig } from \"../../../../shared/index.js\";\n\nexport const useEncryptData = (): ComputedRef<EncryptConfig> => {\n  const themeData = useThemeData();\n\n  return computed(() => themeData.value.encrypt || {});\n};\n"],"names":["LockIcon","h","IconBase","defineComponent","props","emit","frontmatter","usePageFrontmatter","themeLocale","useThemeLocaleData","password","ref","hasTried","remember","locale","computed","hintHandler","verify","nextTick","target","key","useEncryptData","themeData","useThemeData"],"mappings":"6OAGa,MAAAA,EAAgC,IAC3CC,EAAEC,EAAU,CAAE,KAAM,MAAO,EAAG,IAC5BD,EAAE,OAAQ,CACR,EAAG,8jBACL,CAAC,CACH,EAEFD,EAAS,YAAc,WCDvB,IAAeG,EAAAA,EAAgB,CAC7B,KAAM,gBAEN,MAAO,CAML,KAAM,OACR,EAEA,MAAO,CAAC,QAAQ,EAEhB,MAAMC,EAAO,CAAE,KAAAC,CAAK,EAAG,CACrB,MAAMC,EAAcC,EAAmB,EACjCC,EAAcC,EACdC,EAAAA,EAAWC,EAAI,EAAE,EACjBC,EAAWD,EAAI,EAAK,EACpBE,EAAWF,EAAI,EAAK,EAEpBG,EAASC,EAAS,IAAMP,EAAY,MAAM,cAAc,EAE9D,IAAIQ,EAA6B,KAEjC,MAAMC,EAAS,IAAY,CAErBD,GAAa,aAAaA,CAAW,EACzCJ,EAAS,MAAQ,GAEjBP,EAAK,SAAUK,EAAS,MAAOG,EAAS,KAAK,EAExCK,EAAW,EAAA,KAAK,IAAM,CACzBN,EAAS,MAAQ,GAEjBI,EAAc,WAAW,IAAM,CAC7BJ,EAAS,MAAQ,EACnB,EAAG,GAAI,CACT,CAAC,CACH,EAEA,MAAO,IACLX,EACE,MACA,CACE,MAAO,CACL,iBACA,CAAE,OAAQG,EAAM,MAAQE,EAAY,MAAM,IAAQ,CACpD,CACF,EACAL,EAAE,MAAO,CAAE,MAAO,gBAAiB,EAAG,CACpCA,EACE,MACA,CAAE,MAAO,CAAC,OAAQ,CAAE,MAAOW,EAAS,KAAM,CAAC,CAAE,EAC7CA,EAAS,MACLE,EAAO,MAAM,UACbb,EAAED,EAAU,CAAE,aAAcc,EAAO,MAAM,SAAU,CAAC,CAC1D,EACAb,EAAE,MAAO,CAAE,MAAO,UAAW,EAAG,CAC9BA,EAAE,QAAS,CACT,KAAM,WACN,MAAOS,EAAS,MAChB,YAAaI,EAAO,MAAM,YAC1B,QAAS,CAAC,CAAE,OAAAK,CAAO,IAAkB,CACnCT,EAAS,MAA2BS,EAAQ,KAC9C,EACA,UAAW,CAAC,CAAE,IAAAC,CAAI,IAAqB,CACjCA,IAAQ,SAASH,EACvB,CAAA,CACF,CAAC,CACH,CAAC,EACDhB,EAAE,MAAO,CAAE,MAAO,mBAAoB,EAAG,CACvCA,EAAE,QAAS,CACT,KAAM,WACN,MAAOY,EAAS,MAChB,SAAU,IAAOA,EAAS,MAAQ,CAACA,EAAS,KAC9C,CAAC,EACDC,EAAO,MAAM,QACf,CAAC,EACDb,EAAE,SAAU,CAAE,MAAO,SAAU,QAAS,IAAMgB,GAAS,EAAG,IAAI,CAChE,CAAC,CACH,CACJ,CACF,CAAC,ECtFY,MAAAI,EAAiB,IAAkC,CAC9D,MAAMC,EAAYC,EAElB,EAAA,OAAOR,EAAS,IAAMO,EAAU,MAAM,SAAW,CAAA,CAAE,CACrD"}